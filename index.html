<!DOCTYPE html>
<html lang="it">
<head>
    <!-- Replace existing CSP with this -->
    <meta http-equiv="Content-Security-Policy" 
          content="default-src 'self'; 
                   script-src 'self' 'unsafe-inline' https://apis.google.com https://www.gstatic.com https://accounts.google.com; 
                   style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; 
                   img-src 'self' data: https://*.googleusercontent.com https://drive.google.com https://ssl.gstatic.com;
                   font-src 'self' https://cdnjs.cloudflare.com;
                   connect-src 'self' https://www.googleapis.com https://accounts.google.com;
                   frame-src https://accounts.google.com https://content.googleapis.com;
                   child-src https://content.googleapis.com;">
</head>
<body>
    <div class="drive-status" id="driveStatus">
        <i class="fas fa-hdd"></i> <span>Connecting to memories...</span>
    </div>
    <!-- Admin Button -->
    <button class="admin-btn" id="adminBtn" title="Admin Login">ðŸ”’</button>
    
    <!-- Header -->
    <div class="header">
        <h1>in memoria di Ross</h1>
        <div class="subtitle">
            Resterai sempre nei nostri cuori Bomberone
            <span class="memorial-date">6 Agosto 2025</span>
        </div>
    </div>
    
    <!-- Bulletin Board -->
    <div class="bulletin-board">
        <div class="photos-container" id="photosContainer">
            <!-- Photos and videos will be added here dynamically -->
        </div>
        
        <div class="upload-section">
            <h3><i class="fas fa-cloud-upload-alt"></i> E aggiungi sta foto (o video)</h3>
            <input type="file" id="photoUpload" accept="image/*,video/*" multiple>
            
            <!-- Progress bar -->
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar" id="progressBar"></div>
                <div class="progress-text" id="progressText">0%</div>
            </div>
            
            <!-- Status messages -->
            <div class="status-message status-success" id="successMessage"></div>
            <div class="status-message status-error" id="errorMessage"></div>
            
            <button onclick="uploadPhoto()"><i class="fas fa-plus-circle"></i> Daje</button>
            <div class="stats">
                <i class="fas fa-images"></i> <span id="photoCount">0</span> Ricordi condivisi
            </div>
            <div id="signin-container" class="signin-container">
                <p>Authentication required to access memories</p>
                <button id="signin-btn" class="signin-btn">
                    <i class="fab fa-google"></i> Sign in with Google
                </button>
            </div>
        </div>
    </div>
    
    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <div class="lightbox-close" onclick="closeLightbox()">&times;</div>
        <div class="lightbox-prev lightbox-nav" onclick="changeMedia(-1)">&#10094;</div>
        <div class="lightbox-content" id="lightboxContent"></div>
        <div class="lightbox-next lightbox-nav" onclick="changeMedia(1)">&#10095;</div>
        <div class="media-counter" id="mediaCounter"></div>
    </div>
    
    <footer>
        per Rosemberg Porcacchia, sempre con noi
    </footer>
    <script src="https://accounts.google.com/gsi/client"></script>
    <script src="script.js"></script>
</body>
</html>